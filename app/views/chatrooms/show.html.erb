<%= turbo_stream_from "chatroom" %>

<h2 class="text-center font-bold text-2xl"><%= @chatroom.name %></h2>
<p class="text-right text-gray-600"><%= "ðŸ‘¥ #{@chatroom.users.uniq.count} users" %></p>
<div data-controller="messages">
  <div class="border max-h-96 overflow-scroll px-3" data-messages-target="messages">
    <%= turbo_frame_tag :messages do %>
      <% if @messages %>
        <% @messages.each do |message| %>
          <%= render 'messages/message', message: message %>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="text-right">
    <%= render 'messages/new_message_form', chatroom: @chatroom, message: @message %>
  </div>
</div>
